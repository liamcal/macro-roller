import{r as n,j as a,R as k}from"./index-668a294a.js";import{u as D,B as l,e as O,p as Q,M as y}from"./constants-5d868978.js";import{T as f}from"./TextField-7d184059.js";import{D as R,a as T,b as w,c as A}from"./DialogContentText-a54a935f.js";const F=()=>{const{macros:u,upsertMacro:o}=D(y),t=u.length>0?u[0]:void 0,[d,m]=n.useState(""),[x,s]=n.useState(!1),i=n.useCallback(e=>{if(t){const r=t.queries[e];return r==null?void 0:r.value}},[t]),g=n.useCallback(e=>Object.fromEntries(Object.keys(e).map(c=>{const M=e[c];return[c,{...M,value:i(c)}]})),[i]),h=(e,r)=>{t&&o({...t,queries:{...t.queries,[e]:{...t.queries[e],value:r}}})},p=e=>{if(t){const r=t.queries[e];return r==null?void 0:r.defaultValue}return""},C=e=>{const r=O(e.target.value);o({macroId:"default",name:"default",content:e.target.value,queries:t?g(r):r,compiledMacro:[]})},j=e=>{t&&m(Q(t))},v=e=>{s(!0)},b=()=>{m(""),t&&o({...t,content:"",queries:{}})};return a.jsxs("div",{children:[a.jsx("div",{style:{paddingBottom:"1.5rem"},children:a.jsx(f,{multiline:!0,fullWidth:!0,value:(t==null?void 0:t.content)??"",onChange:C,rows:5})}),a.jsx("div",{style:{display:"grid",columnGap:"1rem",rowGap:"0.75rem",gridTemplateColumns:"1fr 1fr",paddingBottom:"1rem"},children:t&&Object.keys(t.queries).map(e=>a.jsx(k.Fragment,{children:t.queries[e]&&a.jsx(f,{label:e,value:i(e)??"",onChange:r=>h(e,r.target.value),type:"number",helperText:p(e)?`Default: ${p(e)}`:" "},e)},`query-textfield-${e}`))}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx(l,{variant:"contained",onClick:j,children:"Run Macro"}),a.jsx(l,{variant:"outlined",color:"error",onClick:v,children:"Clear"}),a.jsxs(R,{open:x,onClose:()=>s(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[a.jsx(T,{children:a.jsx(w,{id:"alert-dialog-description",children:"Do you really want to clear the current macro?"})}),a.jsxs(A,{children:[a.jsx(l,{onClick:()=>s(!1),children:"No"}),a.jsx(l,{onClick:()=>{b(),s(!1)},autoFocus:!0,children:"Yes"})]})]})]}),d&&a.jsx("p",{style:{whiteSpace:"pre-line",textAlign:"start",fontSize:"1.25rem"},children:d})]})};export{F as default};
