import{_ as A}from"./index-75ede403.js";import{h as C,i as E,j as e,g as p,q as S,l as w,z as k,r as l,E as R,G as B,I as O,m as P,H as T,J as I,s as V,K as z,M as h,N as G,O as L,P as $}from"./vendor-24ffecde.js";import{d as q}from"./Edit-60d9a443.js";import{u as D,c as F,A as d,r as Q,M as W}from"./constants-f0c0d715.js";var m={},H=E;Object.defineProperty(m,"__esModule",{value:!0});var f=m.default=void 0,K=H(C()),J=e,N=(0,K.default)((0,J.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");f=m.default=N;const Y=({macro:a,upsertMacroQuery:i})=>{const u=(s,t)=>{const n=a.queries[s];i(a.macroId,{...n,value:t})};return e.jsx("div",{style:{display:"grid",columnGap:"1rem",rowGap:"0.75rem",gridTemplateColumns:"1fr 1fr",paddingBottom:"1rem"},children:Object.keys(a.queries).map(s=>{const{value:t,defaultValue:n}=a.queries[s];return e.jsx(p.Fragment,{children:a.queries[s]&&e.jsx(S,{label:s,value:t??"",onChange:c=>u(s,c.target.value),type:"number",helperText:n?`Default: ${n}`:" "},s)},`query-textfield-${s}`)})})};w(()=>A(()=>import("./EditMacro-a2f194bc.js"),["assets/EditMacro-a2f194bc.js","assets/vendor-24ffecde.js","assets/constants-f0c0d715.js"]));const te=()=>{const{macroId:a}=k(),{macros:i,upsertMacro:u,upsertMacroQuery:s}=D(W),t=l.useMemo(()=>a?i.find(r=>r.macroId===a):void 0,[i,a]),n=l.useMemo(()=>{var r;if(t!=null&&t.content){if(((r=t.compiledMacro)==null?void 0:r.length)>0)return t.compiledMacro;try{return F(t.content)}catch{return[]}}return[]},[t]),[c,g]=l.useState(null),[x,v]=l.useState(!1);if(!t)return null;const M=()=>Object.fromEntries(Object.keys(t.queries).map(r=>[r,parseInt(t.queries[r].value||t.queries[r].defaultValue||"0")])),y=r=>{g(o=>{const j=Q(n,M(),t.adjustment);return r&&o?e.jsxs(p.Fragment,{children:[o,e.jsx("br",{}),j]}):e.jsx(p.Fragment,{children:j})})},_=(r,o)=>{u({...t,adjustment:o})},b=(r,o)=>{v(o)};return l.useEffect(()=>{document.title=`${t.name} | Macro Roller`},[]),t?e.jsxs("div",{children:[e.jsx("div",{style:{paddingBottom:"1rem"},children:e.jsxs(R,{disableGutters:!0,children:[e.jsx(B,{expandIcon:e.jsx(f,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:e.jsxs("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[e.jsx(O,{"aria-label":"edit",component:P,to:"edit",state:{back:`/macro/${a}`},sx:{alignSelf:"top"},children:e.jsx(q,{})}),e.jsxs("h2",{style:{marginBlock:0,marginInlineStart:"1rem"},children:[t.name,t.adjustment&&` (${t.adjustment})`]})]})}),e.jsx(T,{children:e.jsx(I,{align:"left",sx:{fontSize:"1rem",whiteSpace:"pre-wrap",maxHeight:120,overflow:"auto"},children:t.content})})]})}),e.jsx(Y,{macro:t,upsertMacroQuery:s}),e.jsxs("div",{style:{display:"flex",marginBlockEnd:"1rem",justifyContent:"space-between",alignItems:"center",gap:"1rem"},children:[e.jsx(V,{variant:"contained",onClick:()=>y(x),children:"Run Macro"}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs(z,{value:t.adjustment,size:"small",color:"primary",exclusive:!0,onChange:_,children:[e.jsx(h,{value:d.Weak,color:"primary",children:d.Weak}),e.jsx(h,{value:d.Elite,color:"primary",children:d.Elite})]}),e.jsx(G,{control:e.jsx(L,{value:x,onChange:b}),label:"Append"})]})]}),c&&e.jsx($,{elevation:6,sx:{padding:"1rem",whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"start",fontSize:"1.25rem"},children:c})]}):null};export{te as default};
