import{_ as g}from"./index-752f2d7f.js";import{h as v,i as M,j as r,g as u,q as _,l as y,z as b,r as i,E,G as w,I as S,m as C,H as R,J as k,s as x,P as A}from"./vendor-ead14d25.js";import{d as O}from"./Edit-f5dc1a94.js";import{u as P,c as B,r as V,M as I}from"./constants-a070eb73.js";var d={},L=M;Object.defineProperty(d,"__esModule",{value:!0});var f=d.default=void 0,T=L(v()),q=r,z=(0,T.default)((0,q.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");f=d.default=z;const D=({macro:t,upsertMacroQuery:o})=>{const l=(e,s)=>{const n=t.queries[e];o(t.macroId,{...n,value:s})};return r.jsx("div",{style:{display:"grid",columnGap:"1rem",rowGap:"0.75rem",gridTemplateColumns:"1fr 1fr",paddingBottom:"1rem"},children:Object.keys(t.queries).map(e=>{const{value:s,defaultValue:n}=t.queries[e];return r.jsx(u.Fragment,{children:t.queries[e]&&r.jsx(_,{label:e,value:s??"",onChange:c=>l(e,c.target.value),type:"number",helperText:n?`Default: ${n}`:" "},e)},`query-textfield-${e}`)})})};y(()=>g(()=>import("./EditMacro-1de7cd82.js"),["assets/EditMacro-1de7cd82.js","assets/vendor-ead14d25.js","assets/constants-a070eb73.js"]));const H=()=>{const{macroId:t}=b(),{macros:o,upsertMacroQuery:l}=P(I),e=i.useMemo(()=>t?o.find(a=>a.macroId===t):void 0,[o,t]),s=i.useMemo(()=>{var a;if(e!=null&&e.content){if(((a=e.compiledMacro)==null?void 0:a.length)>0)return e.compiledMacro;try{return B(e.content)}catch{return[]}}return[]},[e]),[n,c]=i.useState(null);if(!e)return null;const j=()=>Object.fromEntries(Object.keys(e.queries).map(a=>[a,parseInt(e.queries[a].value||e.queries[a].defaultValue||"0")])),m=a=>{c(h=>{const p=V(s,j());return a?r.jsxs(u.Fragment,{children:[h,r.jsx("br",{}),p]}):r.jsx(u.Fragment,{children:p})})};return i.useEffect(()=>{document.title=`${e.name} | Macro Roller`},[]),e?r.jsxs("div",{children:[r.jsx("div",{style:{paddingBottom:"1rem"},children:r.jsxs(E,{disableGutters:!0,children:[r.jsx(w,{expandIcon:r.jsx(f,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:r.jsxs("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[r.jsx(S,{"aria-label":"edit",component:C,to:"edit",state:{back:`/macro/${t}`},sx:{alignSelf:"top"},children:r.jsx(O,{})}),r.jsx("h2",{style:{marginBlock:0,marginInlineStart:"1rem"},children:e.name})]})}),r.jsx(R,{children:r.jsx(k,{align:"left",sx:{fontSize:"1rem",whiteSpace:"pre-wrap",maxHeight:120,overflow:"auto"},children:e.content})})]})}),r.jsx(D,{macro:e,upsertMacroQuery:l}),r.jsxs("div",{style:{display:"flex",marginBlockEnd:"1rem",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(x,{variant:"contained",onClick:()=>m(!1),children:"Run Macro"}),n&&r.jsx(x,{variant:"outlined",onClick:()=>m(!0),children:"Re-run"})]}),n&&r.jsx(A,{elevation:6,sx:{padding:"1rem",whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"start",fontSize:"1.25rem"},children:n})]}):null};export{H as default};
