import{r as n,j as a,p as g,g as k,q as l,D,s as O,t as Q,v as y}from"./vendor-e5663e25.js";import{u as w,e as A,p as E,M as R}from"./constants-9e207655.js";const B=()=>{const{macros:u,upsertMacro:i}=w(R),t=u.length>0?u[0]:void 0,[d,p]=n.useState(""),[x,s]=n.useState(!1),o=n.useCallback(e=>{if(t){const r=t.queries[e];return r==null?void 0:r.value}},[t]),f=n.useCallback(e=>Object.fromEntries(Object.keys(e).map(c=>{const M=e[c];return[c,{...M,value:o(c)}]})),[o]),h=(e,r)=>{t&&i({...t,queries:{...t.queries,[e]:{...t.queries[e],value:r}}})},m=e=>{if(t){const r=t.queries[e];return r==null?void 0:r.defaultValue}return""},C=e=>{const r=A(e.target.value);i({macroId:"default",name:"default",content:e.target.value,queries:t?f(r):r,compiledMacro:[]})},j=e=>{t&&p(E(t))},v=e=>{s(!0)},b=()=>{p(""),t&&i({...t,content:"",queries:{}})};return a.jsxs("div",{children:[a.jsx("div",{style:{paddingBottom:"1.5rem"},children:a.jsx(g,{multiline:!0,fullWidth:!0,value:(t==null?void 0:t.content)??"",onChange:C,rows:5})}),a.jsx("div",{style:{display:"grid",columnGap:"1rem",rowGap:"0.75rem",gridTemplateColumns:"1fr 1fr",paddingBottom:"1rem"},children:t&&Object.keys(t.queries).map(e=>a.jsx(k.Fragment,{children:t.queries[e]&&a.jsx(g,{label:e,value:o(e)??"",onChange:r=>h(e,r.target.value),type:"number",helperText:m(e)?`Default: ${m(e)}`:" "},e)},`query-textfield-${e}`))}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[a.jsx(l,{variant:"contained",onClick:j,children:"Run Macro"}),a.jsx(l,{variant:"outlined",color:"error",onClick:v,children:"Clear"}),a.jsxs(D,{open:x,onClose:()=>s(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[a.jsx(O,{children:a.jsx(Q,{id:"alert-dialog-description",children:"Do you really want to clear the current macro?"})}),a.jsxs(y,{children:[a.jsx(l,{onClick:()=>s(!1),children:"No"}),a.jsx(l,{onClick:()=>{b(),s(!1)},autoFocus:!0,children:"Yes"})]})]})]}),d&&a.jsx("p",{style:{whiteSpace:"pre-line",textAlign:"start",fontSize:"1.25rem"},children:d})]})};export{B as default};
