import{u as I,a as M,z as w,r as s,j as e,q as f,s as r,D as R,v as A,w as O,x as B,S as L,t as N}from"./vendor-24ffecde.js";import{u as F,M as T}from"./constants-a5d8051d.js";const W=()=>{const i=I(),{state:n}=M(),h=(n==null?void 0:n.back)??"/",{macroId:l}=w(),{macros:c,updateMacroById:g,deleteMacro:C}=F(T),a=s.useMemo(()=>l?c.find(t=>t.macroId===l):void 0,[c,l]),[p,o]=s.useState(!1),[b,d]=s.useState(!1),[j,v]=s.useState(""),[u,D]=s.useState((a==null?void 0:a.content)??""),[m,S]=s.useState((a==null?void 0:a.name)??"");if(!a)return null;const k=t=>{d(!0),v(t)},E=t=>{t.preventDefault();try{g({macroId:a.macroId,name:m,content:u}),i(h)}catch(x){x instanceof Error&&k(x.message)}},y=()=>{o(!1),C(a.macroId),i("/",{replace:!0})};return s.useEffect(()=>{document.title=`${a.name} | Macro Roller`},[]),e.jsxs("div",{children:[e.jsxs("form",{onSubmit:E,children:[e.jsx(f,{sx:{paddingBlockEnd:"1rem"},fullWidth:!0,value:m,onChange:t=>S(t.target.value),label:"Name"}),e.jsx(f,{sx:{paddingBlockEnd:"1rem"},multiline:!0,fullWidth:!0,value:u,onChange:t=>D(t.target.value),minRows:5,maxRows:15,label:"Content"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(r,{variant:"contained",type:"submit",children:"Save Changes"}),e.jsx(r,{variant:"outlined",color:"error",onClick:()=>o(!0),children:"Delete"})]})]}),e.jsxs(R,{open:p,onClose:()=>o(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(A,{children:e.jsx(O,{id:"alert-dialog-description",children:"Do you really want to delete the current macro?"})}),e.jsxs(B,{children:[e.jsx(r,{onClick:()=>o(!1),autoFocus:!0,children:"Cancel"}),e.jsx(r,{onClick:y,children:"Delete"})]})]}),e.jsx(L,{open:b,autoHideDuration:5e3,onClose:()=>d(!1),children:e.jsx(N,{severity:"error",children:j})})]})};export{W as default};
