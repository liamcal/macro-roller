import{_ as g}from"./index-fd2facf9.js";import{h as v,i as M,j as r,g as d,p as _,w as y,r as c,x as b,y as w,I as E,l as S,z as C,E as k,q as x,P as R}from"./vendor-e5663e25.js";import{l as O,d as A}from"./Edit-951698aa.js";import{u as P,c as B,r as V,M as I}from"./constants-9e207655.js";var u={},L=M;Object.defineProperty(u,"__esModule",{value:!0});var f=u.default=void 0,T=L(v()),q=r,z=(0,T.default)((0,q.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");f=u.default=z;const D=({macro:t,upsertMacroQuery:o})=>{const i=(e,s)=>{const n=t.queries[e];o(t.macroId,{...n,value:s})};return r.jsx("div",{style:{display:"grid",columnGap:"1rem",rowGap:"0.75rem",gridTemplateColumns:"1fr 1fr",paddingBottom:"1rem"},children:Object.keys(t.queries).map(e=>{const{value:s,defaultValue:n}=t.queries[e];return r.jsx(d.Fragment,{children:t.queries[e]&&r.jsx(_,{label:e,value:s??"",onChange:l=>i(e,l.target.value),type:"number",helperText:n?`Default: ${n}`:" "},e)},`query-textfield-${e}`)})})},Q=O(()=>g(()=>import("./EditMacro-b799aee6.js"),["assets/EditMacro-b799aee6.js","assets/vendor-e5663e25.js","assets/constants-9e207655.js"])),K=()=>{const{macroId:t}=y(),{macros:o,upsertMacroQuery:i}=P(I),e=c.useMemo(()=>t?o.find(a=>a.macroId===t):void 0,[o,t]),s=c.useMemo(()=>{var a;if(e!=null&&e.content){if(((a=e.compiledMacro)==null?void 0:a.length)>0)return e.compiledMacro;try{return B(e.content)}catch{return[]}}return[]},[e]),[n,l]=c.useState(null);if(!e)return null;const j=()=>Object.fromEntries(Object.keys(e.queries).map(a=>[a,parseInt(e.queries[a].value||e.queries[a].defaultValue||"0")])),p=a=>{l(h=>{const m=V(s,j());return a?r.jsxs(d.Fragment,{children:[h,r.jsx("br",{}),m]}):r.jsx(d.Fragment,{children:m})})};return e?r.jsxs("div",{children:[r.jsx("div",{style:{paddingBottom:"1rem"},children:r.jsxs(b,{disableGutters:!0,children:[r.jsx(w,{expandIcon:r.jsx(f,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:r.jsxs("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[r.jsx(E,{"aria-label":"edit",component:S,to:"edit",state:{back:`/macro/${t}`},sx:{alignSelf:"top"},onMouseOver:Q.preload,children:r.jsx(A,{})}),r.jsx("h2",{style:{marginBlock:0,marginInlineStart:"1rem"},children:e.name})]})}),r.jsx(C,{children:r.jsx(k,{align:"left",sx:{fontSize:"1rem",whiteSpace:"pre-wrap",maxHeight:120,overflow:"auto"},children:e.content})})]})}),r.jsx(D,{macro:e,upsertMacroQuery:i}),r.jsxs("div",{style:{display:"flex",marginBlockEnd:"1rem",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(x,{variant:"contained",onClick:()=>p(!1),children:"Run Macro"}),n&&r.jsx(x,{variant:"outlined",onClick:()=>p(!0),children:"Re-run"})]}),n&&r.jsx(R,{elevation:6,sx:{padding:"1rem",whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"start",fontSize:"1.25rem"},children:n})]}):null};export{K as default};
