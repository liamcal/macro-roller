import{q as I,x as M,w,r as s,j as e}from"./index-668a294a.js";import{u as A,B as r,M as B}from"./constants-5d868978.js";import{T as f}from"./TextField-7d184059.js";import{D as O,a as R,b as L,c as N}from"./DialogContentText-a54a935f.js";import{S as T,A as F}from"./Snackbar-c0e4191c.js";const H=()=>{const l=I(),{state:n}=M(),h=(n==null?void 0:n.back)??"/",{macroId:i}=w(),{macros:c,updateMacroById:g,deleteMacro:p}=A(B),a=s.useMemo(()=>i?c.find(t=>t.macroId===i):void 0,[c,i]),[C,o]=s.useState(!1),[b,d]=s.useState(!1),[j,D]=s.useState(""),[m,S]=s.useState((a==null?void 0:a.content)??""),[u,v]=s.useState((a==null?void 0:a.name)??"");if(!a)return null;const k=t=>{d(!0),D(t)},E=t=>{t.preventDefault();try{g({macroId:a.macroId,name:u,content:m}),l(h)}catch(x){x instanceof Error&&k(x.message)}},y=()=>{o(!1),p(a.macroId),l("/",{replace:!0})};return e.jsxs("div",{children:[e.jsxs("form",{onSubmit:E,children:[e.jsx(f,{sx:{paddingBlockEnd:"1rem"},fullWidth:!0,value:u,onChange:t=>v(t.target.value),label:"Name"}),e.jsx(f,{sx:{paddingBlockEnd:"1rem"},multiline:!0,fullWidth:!0,value:m,onChange:t=>S(t.target.value),minRows:5,maxRows:15,label:"Content"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(r,{variant:"contained",type:"submit",children:"Save Changes"}),e.jsx(r,{variant:"outlined",color:"error",onClick:()=>o(!0),children:"Delete"})]})]}),e.jsxs(O,{open:C,onClose:()=>o(!1),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(R,{children:e.jsx(L,{id:"alert-dialog-description",children:"Do you really want to delete the current macro?"})}),e.jsxs(N,{children:[e.jsx(r,{onClick:()=>o(!1),autoFocus:!0,children:"Cancel"}),e.jsx(r,{onClick:y,children:"Delete"})]})]}),e.jsx(T,{open:b,autoHideDuration:5e3,onClose:()=>d(!1),children:e.jsx(F,{severity:"error",children:j})})]})};export{H as default};
